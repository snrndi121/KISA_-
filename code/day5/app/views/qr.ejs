<% include ./hf/header.ejs %>
<script src="scripts/instascan.min.js"></script>
<video id="preview" style="width: 100%; height:100%; margin-top: 25vh"  ></video>
<script type="text/javascript">
    let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
    scanner.addListener('scan', function (content) {
        console.log(content);
        // $.ajax({
        //     url: 'http://localhost:3000/withdraw',
        //     type: 'POST',
        //     headers: {
        //         'x-access-token': sessionStorage.getItem('jwtToken')
        //     },
        //     data: {
        //         finNum: '199003328057724253012100'
        //     },
        //     success: function (data) {
        //         console.log(data);
        //
        //     }
        // })

    });
    Instascan.Camera.getCameras().then(function (cameras) {
        if (cameras.length > 0) {
            scanner.start(cameras[0]);
        } else {
            console.error('No cameras found.');
        }
    }).catch(function (e) {
        console.error(e);
    });
</script>
<% include ./hf/footer.ejs %>
